var TW = TW || {};
TW.views = TW.views || {};
TW.views.tasks = TW.views.tasks || {};
TW.views.tasks.loans = TW.views.tasks.loans || {};
TW.views.tasks.loans.form = TW.views.tasks.loans.form || {};

Object.assign(TW.views.tasks.loans.form, {

  initialize: function () {
    // Bind injected datepicker elements
    $('body').on('focus', ".datepicker_recurring_start", function () {
      $(this).datepicker();
    });

    $(".loan_update_form").submit(function (event) {
      var form = $(this);
      var checked = $("#loan_form input:checked[type=checkbox]").serializeArray();
      $.each(checked, function (value, attribute) {

        $('<input>').attr({
          type: 'hidden',
          name: attribute.name,
          value: attribute.value
        }).appendTo(form);
      });

      //  event.preventDefault();
    });


  }
});

$(document).on("turbolinks:load", TW.views.tasks.loans.form.initialize() );

