<%= content_for :associated do %>
  <% if @source.type == 'Source::Bibtex' %>
    <% if @source.authors.any? %>
      <h3>Authors</h3>
      <ul>
        <% @source.authors.each do |author| %>
          <%= content_tag(:li, author.last_name) %>
        <% end %>
      </ul>
    <% end %>
    <% if @source.editors.any? %>
      <h3>Editors</h3>
      <ul>
        <% @source.editors.each do |editor| %>
          <%= content_tag(:li, editor.last_name) %>
        <% end %>
      </ul>
    <% end %>
  <% end %>

  <% if @source.project_sources.where.not(project_id: sessions_current_project_id).references(:projects_sources).any? -%>
    <%= content_tag(:div, 'This source is used in another project.', class: :warning) -%>
  <% end %>

  <% if @source.project_sources.where(project_id: sessions_current_project_id).references(:projects_sources).any? -%>
    <%= content_tag(:div, 'This source is in your project.', class: :passed) -%>
  <% end %>

<% end %>

<%= source_attributes_for(@source) -%>

<%= render('/shared/data/project/show', object: @source) -%>
